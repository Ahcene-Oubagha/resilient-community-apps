# Risk Fabric Function Integration

This package provides several functional integrations with Resilient and example workflows:
* Get Host, User, and IP Risk Information
* Get Action Plans
* Get Risk Model Instances and Details
* Set Event Classifications and Mitigations


## Installation

This template project was generated by

    resilient-circuits codegen -p fn_risk_fabric -f rf_get_host_risk rf_get_risk_model_instances rf_get_user_risk rf_set_event_classifications rf_get_risk_model_instance_details rf_set_event_mitigations rf_get_action_plans rf_get_ip_risk


To install in "development mode"

    pip install -e ./fn_risk_fabric/

After installation, the package will be loaded by `resilient-circuits run`.


To uninstall,

    pip uninstall fn_risk_fabric

To check for errors,

    pylint --disable=R,C,W fn_risk_fabric

To package for distribution,

    python setup.py sdist --formats=gztar

The resulting .tar.gz file can be installed using

    pip install fn_risk_fabric-<version>.tar.gz

## Configuration

Add message destinations, function inputs, and functions to the Resilient instance:

    resilient-circuits customize

Add configuration details to the Resilient config file:

    resilient-circuits config -u

Set the following values in the config file under the `[fn_risk_fabric]` section:

    server=https://www.riskfabric.com
    username=xxxxxxx
    password=xxxxxxx
    verifyFlag=True


## Example Create Incident Scripts

Loading Action Plans data for a Queue. Be sure to set the correct Incident Type ID:

    python create_incidents_action_plans.py -q resilient

Loading Risk Models with the Incident Type and Limit passed as a parameter:

    python create_incidents_risk_models.py --itype "Risk Model" --limit 1