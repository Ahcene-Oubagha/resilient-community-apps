[resilient]

# Basic service connection
host=resilient
port=443
email=api@example.com
password=password
org=Culture

# Actions Module connection
stomp_port=65001

# Directory containing the other components to load
componentsdir=components

# If your Resilient server uses a self-signed TLS certificate, or some
# other certificate that is not automatically trusted by your machine,
# you need to explicitly tell the Python scripts that it should be trusted.
# To explicitly trust a site, download its certificate to a file, e.g:
#    mkdir -p ~/resilient/
#    openssl s_client -connect resilient.example.com:443 -showcerts < /dev/null 2> /dev/null | openssl x509 -outform PEM > ~/resilient/cert.cer
# then specify the file (remove the '#' from the line below):
# cafile=~/resilient/cert.cer

# -----------------------------------------------------------------------------
# The 'shell_runner' action component
# -----------------------------------------------------------------------------
[shell]
queue=shell

# Default is to run a script, and attach the result as a text file
# NOTE: change the paths as appropriate!

# Curly braces use the JINJA2 template syntax.
# The '...|ps' escapes content in '...' for safer use in a PowerShell commandline

command=powershell "C:\\resilient\\actions\\scripts\\{{action_name}}.ps1" "{{artifact.value|ps}}"
result_disposition=new_attachment,filename={{action_name}}_{{properties._message_headers.timestamp|iso8601}}.txt

# NOTE: for Unix environments, replace the default command with something like the below.
# Curly braces use the JINJA2 template syntax.
# The '...|sh' escapes content in '...' for safer use in a Bash commandline

# command=bash /home/resilient/actions/scripts/{{action_name}}.sh "{{artifact.value|sh}}"

# It is also possible to specify a command, and a disposition, for specific actions
# (based on the action name).  For example below, a custom action 'nslookup' just
# runs the nslookup command directly, passing the artifact value as a parameter.
# A variery of dispositions is available e.g. update the incident, add artifacts, etc;
# contact support@resilientsystems.com for details.

nslookup=nslookup "{{artifact.value|sh}}"
nslookup_result_disposition=new_attachment,filename={{action_name}}_{{artifact.value|sh}}.txt
